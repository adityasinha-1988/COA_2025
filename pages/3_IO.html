<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive I/O Organization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .tab-button.active { border-bottom: 2px solid #4F46E5; color: #4F46E5; font-weight: 600; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .draggable { cursor: move; user-select: none; }
        .dropzone { transition: background-color 0.3s ease; }
        .dropzone.drag-over { background-color: #e0f2fe; border-style: dashed; }
        .feedback { font-size: 2rem; opacity: 0; transition: opacity 0.5s ease; }
        .feedback.show { opacity: 1; }
        .progress-bar-inner { transition: width 0.5s ease-in-out; }
        .highlight-border { border-color: #f59e0b; animation: pulse-border 1.5s infinite; }
        @keyframes pulse-border { 0% { border-color: #f59e0b; } 50% { border-color: #fbbf24; } 100% { border-color: #f59e0b; } }
        .path-animation { stroke-dasharray: 1000; stroke-dashoffset: 1000; animation: draw-path 2s ease-in-out forwards; }
        @keyframes draw-path { to { stroke-dashoffset: 0; } }
        
        /* Bus Animation Styles */
        .bus { stroke-width: 3; stroke-dasharray: 10 5; transition: stroke 0.3s ease, filter 0.3s ease; }
        .bus.active { stroke-width: 5; filter: drop-shadow(0 0 4px currentColor); animation: flow 1.5s linear infinite; }
        .component { transition: filter 0.3s ease, fill 0.3s ease, stroke 0.3s ease; }
        .component.active { filter: drop-shadow(0 0 8px #f59e0b); fill: #fef3c7; }
        @keyframes flow { from { stroke-dashoffset: 25; } to { stroke-dashoffset: 0; } }

        /* Multi-Device Chaos & Solution Animation */
        .io-anim-el { opacity: 0; }
        @keyframes send-data {
            0% { opacity: 1; transform: translate(var(--tx-start, 0), var(--ty-start, 0)) scale(var(--scale-start, 1)); }
            100% { opacity: 0; transform: translate(var(--tx-end, 0), var(--ty-end, 0)) scale(var(--scale-end, 1)); }
        }
        .animate-send { animation: send-data var(--duration, 1.5s) var(--timing, ease-in) forwards; }

        /* Driver Internals Animation */
        .driver-code-line, .driver-arrow, .register-value { opacity: 0; transition: opacity 0.5s ease-in-out; }
        .driver-code-line.active { opacity: 1; }
        .register.active { stroke: #f59e0b; stroke-width: 2px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center"><h1 class="text-2xl font-bold text-indigo-600">I/O Organization</h1><div class="hidden md:flex space-x-6"><a href="#intro" class="text-slate-600 hover:text-indigo-600 transition">Introduction</a><a href="#peripherals" class="text-slate-600 hover:text-indigo-600 transition">Peripherals</a><a href="#why-interface" class="text-slate-600 hover:text-indigo-600 transition">Why Interface?</a><a href="#bus-architecture" class="text-slate-600 hover:text-indigo-600 transition">Bus Architecture</a><a href="#addressing" class="text-slate-600 hover:text-indigo-600 transition">Addressing</a><a href="#transfer" class="text-slate-600 hover:text-indigo-600 transition">Data Transfer</a><a href="#quiz" class="text-slate-600 hover:text-indigo-600 transition">Quiz</a></div><div class="md:hidden"><button id="menu-btn" class="text-slate-600 focus:outline-none"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg></button></div></nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4"><a href="#intro" class="block py-2 text-slate-600 hover:text-indigo-600">Introduction</a><a href="#peripherals" class="block py-2 text-slate-600 hover:text-indigo-600">Peripherals</a><a href="#why-interface" class="block py-2 text-slate-600 hover:text-indigo-600">Why Interface?</a><a href="#bus-architecture" class="block py-2 text-slate-600 hover:text-indigo-600">Bus Architecture</a><a href="#addressing" class="block py-2 text-slate-600 hover:text-indigo-600">Addressing</a><a href="#transfer" class="block py-2 text-slate-600 hover:text-indigo-600">Data Transfer</a><a href="#quiz" class="block py-2 text-slate-600 hover:text-indigo-600">Quiz</a></div>
    </header>

    <main class="container mx-auto px-6 py-12">

        <section id="intro" class="mb-16"><div class="bg-white p-8 rounded-xl shadow-lg text-center"><h2 class="text-3xl font-bold mb-4">Connecting Computers to the Outside World</h2><p class="max-w-3xl mx-auto text-lg text-slate-600 mb-6">I/O (Input/Output) organization is the architecture that allows the CPU to communicate with the vast world of external devices‚Äîfrom keyboards to hard drives. It's the essential bridge between the computer's brain and its senses.</p><div class="bg-indigo-50 p-6 rounded-lg border-l-4 border-indigo-500 text-left"><h3 class="text-xl font-semibold mb-2 text-indigo-800">Learning Objectives:</h3><ul class="list-disc list-inside space-y-1 text-slate-700"><li>Identify and categorize peripheral devices.</li><li>Understand why I/O interfaces and device drivers are necessary for both input and output.</li><li>Visualize how different bus architectures work.</li><li>Compare Memory-Mapped vs. I/O-Mapped addressing.</li><li>Differentiate between Programmed, Interrupt-Driven, and DMA transfer techniques.</li></ul></div></div></section>

        <section id="peripherals" class="mb-16"><h2 class="text-3xl font-bold text-center mb-8">Meet the Peripherals</h2><div class="bg-white p-8 rounded-xl shadow-lg"><p class="text-center text-slate-600 mb-8">Peripherals are all the devices connected to the CPU besides main memory. Let's categorize them! <br><strong>Drag and drop each device into its correct category.</strong></p><div class="flex flex-col md:flex-row gap-8"><div id="device-bank" class="w-full md:w-1/4 bg-slate-100 p-4 rounded-lg flex flex-wrap gap-4 justify-center items-start"><div class="draggable bg-white p-3 rounded-lg shadow cursor-move flex items-center gap-2" draggable="true" data-type="input">‚å®Ô∏è Keyboard</div><div class="draggable bg-white p-3 rounded-lg shadow cursor-move flex items-center gap-2" draggable="true" data-type="output">üñ®Ô∏è Printer</div><div class="draggable bg-white p-3 rounded-lg shadow cursor-move flex items-center gap-2" draggable="true" data-type="storage">üíæ SSD Drive</div><div class="draggable bg-white p-3 rounded-lg shadow cursor-move flex items-center gap-2" draggable="true" data-type="input">üñ±Ô∏è Mouse</div><div class="draggable bg-white p-3 rounded-lg shadow cursor-move flex items-center gap-2" draggable="true" data-type="output">üñ•Ô∏è Monitor</div><div class="draggable bg-white p-3 rounded-lg shadow cursor-move flex items-center gap-2" draggable="true" data-type="storage">üíø Hard Disk</div></div><div class="w-full md:w-3/4 grid grid-cols-1 sm:grid-cols-3 gap-6"><div class="dropzone bg-blue-50 p-4 rounded-lg border-2 border-blue-200" data-type="input"><h3 class="font-bold text-blue-800 text-center mb-2">Input Devices</h3><div class="min-h-[100px] space-y-2"></div></div><div class="dropzone bg-green-50 p-4 rounded-lg border-2 border-green-200" data-type="output"><h3 class="font-bold text-green-800 text-center mb-2">Output Devices</h3><div class="min-h-[100px] space-y-2"></div></div><div class="dropzone bg-purple-50 p-4 rounded-lg border-2 border-purple-200" data-type="storage"><h3 class="font-bold text-purple-800 text-center mb-2">Storage Devices</h3><div class="min-h-[100px] space-y-2"></div></div></div></div><div id="feedback-container" class="relative h-12 mt-4"><div class="feedback absolute inset-0 flex justify-center items-center text-green-500">‚úÖ Correct!</div><div class="feedback absolute inset-0 flex justify-center items-center text-red-500">‚ùå Try Again!</div></div></div></section>

        <section id="why-interface" class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-8">Why Do We Need an I/O Interface?</h2>
            <div class="bg-white p-8 rounded-xl shadow-lg">
                <p class="text-center text-slate-600 mb-6">A powerful CPU cannot talk directly to a simple printer, a fast SSD, and a slow keyboard all at once. They are all fundamentally different. The solution is a combination of hardware (**I/O Interface**) and software (**Device Driver**).</p>
                
                <div class="bg-slate-50 p-6 rounded-lg mt-8">
                    <h3 class="font-bold text-xl mb-2 text-center text-indigo-700">The Problem: Direct Control Chaos (Output)</h3>
                    <p class="text-center text-sm text-slate-500 mb-4">A CPU speaks one language (fast, parallel data). Peripherals speak many different languages. Watch what happens when the CPU tries to send data out to multiple devices, causing **speed and data format mismatches**.</p>
                    <div class="w-full text-center p-4"><svg id="svg-chaos-output" viewBox="0 0 400 200" class="w-full max-w-2xl h-auto mx-auto"><text x="200" y="20" text-anchor="middle" font-size="24">CPU üß†</text><g><text x="50" y="170" text-anchor="middle">üíæ SSD</text><rect x="25" y="140" width="50" height="15" fill="none" stroke="black" stroke-dasharray="2 2" rx="2"/><text x="50" y="150" font-size="7" text-anchor="middle">Parallel Input</text></g><g><text x="200" y="170" text-anchor="middle">üñ®Ô∏è Printer</text><rect x="185" y="140" width="30" height="15" fill="none" stroke="black" stroke-dasharray="2 2" rx="2"/><text x="200" y="150" font-size="7" text-anchor="middle">Byte Input</text></g><g><text x="350" y="170" text-anchor="middle">‚å®Ô∏è Keyboard</text><path d="M 345 147 h 10" stroke="black" stroke-width="1"/><text x="350" y="156" font-size="7" text-anchor="middle">Serial Input</text></g><g id="chaos-cpu-packet-1" class="io-anim-el" style="--tx-end: 0px; --ty-end: 110px; --duration: 0.8s; --timing: ease-in;"><rect x="180" y="30" width="40" height="15" fill="#38bdf8" rx="2"/></g><g id="chaos-cpu-packet-2" class="io-anim-el" style="--tx-end: 0px; --ty-end: 110px; --duration: 0.8s; --timing: ease-in;"><rect x="180" y="30" width="40" height="15" fill="#38bdf8" rx="2"/></g><text id="err-printer-speed" class="io-anim-el" x="200" y="130" fill="red" text-anchor="middle" style="--duration: 0.5s; --timing: linear;">üê¢ DROPPED!</text><g id="err-format-shatter" class="io-anim-el" style="--duration: 0.5s; --timing: ease-in-out; --scale-start: 1; --scale-end: 1.5;"><path d="M190 120 l-5 -5 l5 5 l-5 5 l5 -5 l-3 -5 l3 5 l3 -5" stroke="red" stroke-width="1.5"/><path d="M340 120 l-5 -5 l5 5 l-5 5 l5 -5 l-3 -5 l3 5 l3 -5" stroke="red" stroke-width="1.5"/></g></svg><button id="btn-chaos-output" class="mt-4 bg-red-500 text-white p-2 px-4 rounded-lg hover:bg-red-600">Attempt Direct Output</button></div>
                </div>

                <div class="bg-slate-50 p-6 rounded-lg mt-8">
                    <h3 class="font-bold text-xl mb-2 text-center text-indigo-700">The Problem: Direct Control Chaos (Input)</h3>
                    <p class="text-center text-sm text-slate-500 mb-4">Communication is a two-way street. A keyboard sends slow, serial signals, but the CPU expects fast, parallel data. This results in another mismatch.</p>
                     <div class="w-full text-center p-4"><svg id="svg-chaos-input" viewBox="0 0 400 200" class="w-full max-w-2xl h-auto mx-auto"><g><text x="200" y="20" text-anchor="middle" font-size="24">CPU üß†</text><rect x="175" y="30" width="50" height="15" fill="none" stroke="black" stroke-dasharray="2 2" rx="2"/><text x="200" y="40" font-size="7" text-anchor="middle">Parallel Input</text></g><g><text x="200" y="170" text-anchor="middle">‚å®Ô∏è Keyboard</text><text x="200" y="182" font-size="12" >Press 'K'</text></g><g id="chaos-key-signal" class="io-anim-el" style="--tx-start:0; --ty-start:0; --tx-end: 0px; --ty-end: -100px; --duration: 1.2s; --timing: linear;"><circle cx="200" cy="150" r="4" fill="#34d399"/></g><text id="err-input-format" class="io-anim-el" x="200" y="60" fill="red" text-anchor="middle" style="--duration: 0.5s; --timing: ease-in-out;">üí• MISMATCH!</text></svg><button id="btn-chaos-input" class="mt-4 bg-red-500 text-white p-2 px-4 rounded-lg hover:bg-red-600">Attempt Direct Input</button></div>
                </div>

                <div class="bg-emerald-50 p-6 rounded-lg mt-8 border-t-4 border-emerald-400">
                    <h3 class="font-bold text-xl mb-2 text-center text-emerald-800">The Solution: The I/O Controller Hub</h3>
                    <p class="text-center text-sm text-slate-500 mb-6">The CPU offloads the complex task to a dedicated **I/O Controller**. This hardware hub contains specialized interfaces that **buffer (for speed)** and **convert (for format)** data for each device, in both directions.</p>
                     <div class="w-full text-center p-4"><svg id="svg-hub-solution" viewBox="0 0 400 200" class="w-full max-w-2xl h-auto mx-auto"><text x="200" y="20" text-anchor="middle" font-size="24">CPU üß†</text><rect x="100" y="60" width="200" height="60" rx="5" class="fill-slate-200 stroke-slate-400"/><text x="200" y="75" text-anchor="middle" font-weight="bold">I/O Controller Hub</text><rect x="175" y="85" width="50" height="25" fill="white" stroke="gray"/><rect id="sol-buffer-fill" class="io-anim-el" x="175" y="85" width="0" height="25" fill="#f472b6" style="--duration: 0.5s;"/><text x="135" y="100" font-size="8" text-anchor="middle">Parallel I/F</text><text x="200" y="100" font-size="8" text-anchor="middle">Byte Buffer</text><text x="265" y="100" font-size="8" text-anchor="middle">Serial I/F</text><path d="M 200 40 V 60" stroke-width="4" class="stroke-slate-400"/><path d="M 50 155 V 120 H 135" stroke-width="2" class="stroke-slate-400 fill-none"/><path d="M 200 155 V 120" stroke-width="2" class="stroke-slate-400"/><path d="M 350 155 V 120 H 265" stroke-width="2" class="stroke-slate-400 fill-none"/><text x="50" y="170" text-anchor="middle">üíæ SSD</text><text x="200" y="170" text-anchor="middle">üñ®Ô∏è Printer</text><text x="350" y="170" text-anchor="middle">‚å®Ô∏è Keyboard</text><g id="sol-cpu-packet" class="io-anim-el" style="--tx-end: 0px; --ty-end: 30px; --duration: 0.8s;"><rect x="180" y="30" width="40" height="15" fill="#38bdf8" rx="2"/></g><g id="sol-ssd-packet" class="io-anim-el" style="--tx-start: 115px; --ty-start: 55px; --tx-end: -85px; --ty-end: 95px; --duration: 0.8s; --timing: ease-out;"><rect x="50" y="0" width="40" height="15" fill="#38bdf8" rx="2"/></g><g id="sol-printer-packet" class="io-anim-el" style="--tx-start: 190px; --ty-start: 55px; --tx-end: 10px; --ty-end: 95px; --duration: 1.5s; --timing: linear;"><rect x="0" y="0" width="10" height="15" fill="#f472b6" rx="2"/></g><g id="sol-keyboard-packet" class="io-anim-el" style="--tx-start: 265px; --ty-start: 60px; --tx-end: 80px; --ty-end: 90px; --duration: 2s; --timing: linear;"><circle cx="0" cy="0" r="4" fill="#34d399"/></g></svg><button id="btn-solution" class="mt-4 bg-emerald-600 text-white p-2 px-4 rounded-lg hover:bg-emerald-700">Show Solution in Action</button></div>
                </div>

                 <div class="bg-amber-50 p-6 rounded-lg mt-8 border-t-4 border-amber-400">
                    <h3 class="font-bold text-xl mb-2 text-center text-amber-800">A Closer Look: The Device Driver's Role</h3>
                    <p class="text-center text-sm text-slate-500 mb-6">How does the CPU use the I/O Controller? Through software called a **Device Driver**. The driver translates a simple command like `print("H")` into the sequence of low-level hardware operations the interface understands.</p>
                    <div class="grid md:grid-cols-2 gap-8 items-center"><div><svg id="svg-driver-internals" viewBox="0 0 250 250" class="w-full h-auto mx-auto bg-white rounded-lg border"><text x="125" y="25" text-anchor="middle" font-weight="bold" class="fill-slate-700">User App</text><text x="125" y="40" text-anchor="middle" font-size="10" class="fill-slate-500">print("H")</text><path d="M 125 50 v 20" stroke="#f59e0b" stroke-width="2" stroke-dasharray="3 3"/><text id="driver-arrow-1" x="125" y="60" text-anchor="middle" class="driver-arrow" font-size="16">‚¨áÔ∏è</text><rect x="50" y="75" width="150" height="70" class="fill-amber-100" rx="5"/><text x="125" y="90" text-anchor="middle" font-weight="bold" class="fill-amber-800">Device Driver</text><text id="driver-line-1" x="60" y="110" font-size="10" class="driver-code-line font-mono">1. while(STATUS != READY)</text><text id="driver-line-2" x="60" y="122" font-size="10" class="driver-code-line font-mono">2. DATA_REG = 'H'</text><text id="driver-line-3" x="60" y="134" font-size="10" class="driver-code-line font-mono">3. CTRL_REG = START</text><path d="M 125 150 v 20" stroke="#4f46e5" stroke-width="2" stroke-dasharray="3 3"/><text id="driver-arrow-2" x="125" y="160" text-anchor="middle" class="driver-arrow" font-size="16">‚¨áÔ∏è</text><rect x="25" y="175" width="200" height="60" class="fill-indigo-100" rx="5"/><text x="125" y="190" text-anchor="middle" font-weight="bold" class="fill-indigo-800">I/O Interface Registers</text><rect id="reg-status" x="35" y="200" width="50" height="25" class="register fill-white stroke-slate-400" rx="3"/><text x="60" y="208" font-size="8" text-anchor="middle">STATUS</text><text id="val-status" x="60" y="220" font-size="10" text-anchor="middle" class="register-value font-bold">BUSY</text><rect id="reg-data" x="100" y="200" width="50" height="25" class="register fill-white stroke-slate-400" rx="3"/><text x="125" y="208" font-size="8" text-anchor="middle">DATA</text><text id="val-data" x="125" y="220" font-size="10" text-anchor="middle" class="register-value font-bold"></text><rect id="reg-ctrl" x="165" y="200" width="50" height="25" class="register fill-white stroke-slate-400" rx="3"/><text x="190" y="208" font-size="8" text-anchor="middle">CONTROL</text><text id="val-ctrl" x="190" y="220" font-size="10" text-anchor="middle" class="register-value font-bold"></text></svg></div><div><button id="btn-driver" class="w-full bg-amber-600 text-white p-3 rounded-lg hover:bg-amber-700">Animate `print("H")`</button><div id="driver-log" class="mt-4 p-2 bg-white rounded h-48 text-sm font-mono overflow-y-auto border"></div></div></div>
                </div>
            </div>
        </section>

        <section id="bus-architecture" class="mb-16"><h2 class="text-3xl font-bold text-center mb-8">Connecting Everything: The System Bus</h2><div class="bg-white p-8 rounded-xl shadow-lg"><p class="text-center text-slate-600 mb-8">A bus is a communication system that transfers data between components. How the CPU, I/O Controller, and memory are wired together has big implications. Click the buttons to see how data flows in each model!</p><div class="flex justify-center border-b mb-6"><button class="tab-button p-4 active" data-tab="separate-bus">Separate Busses</button><button class="tab-button p-4" data-tab="common-ad-bus">Common Address/Data Bus</button><button class="tab-button p-4" data-tab="unified-bus">Unified Bus</button></div><div id="separate-bus" class="tab-content active"><h3 class="font-bold text-xl mb-2 text-center text-indigo-700">Architecture 1: Totally Separate Busses</h3><p class="text-center text-sm text-slate-500 mb-4"><strong>Analogy:</strong> Separate highways for cars (Memory) and trucks (I/O). No traffic jams between them, but it's expensive to build two highways.</p><div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center"><div class="md:col-span-2"><svg id="svg-separate" class="w-full h-64" viewBox="0 0 400 200"><rect id="cpu-separate" x="175" y="10" width="50" height="30" class="component fill-slate-200 stroke-slate-400" rx="5"/><text x="200" y="30" text-anchor="middle">CPU</text><rect id="mem-separate" x="10" y="160" width="70" height="30" class="component fill-blue-200 stroke-blue-400" rx="5"/><text x="45" y="180" text-anchor="middle">Memory</text><rect id="io-separate" x="320" y="160" width="70" height="30" class="component fill-amber-200 stroke-amber-400" rx="5"/><text x="355" y="180" text-anchor="middle">I/O</text><path id="sep-mem-addr" d="M 185 40 V 80 H 45 V 160" class="bus stroke-sky-500 fill-none"/><path id="sep-mem-data" d="M 195 40 V 90 H 45 V 160" class="bus stroke-emerald-500 fill-none"/><path id="sep-mem-ctrl" d="M 205 40 V 100 H 45 V 160" class="bus stroke-red-500 fill-none"/><path id="sep-io-addr" d="M 215 40 V 80 H 355 V 160" class="bus stroke-sky-500 fill-none"/><path id="sep-io-data" d="M 205 40 V 90 H 355 V 160" class="bus stroke-emerald-500 fill-none"/><path id="sep-io-ctrl" d="M 195 40 V 100 H 355 V 160" class="bus stroke-red-500 fill-none"/></svg></div><div><div class="flex flex-col space-y-2"><button onclick="simulateBus('separate', 'mem_read')" class="w-full bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600">Read from Memory</button><button onclick="simulateBus('separate', 'io_write')" class="w-full bg-amber-500 text-white p-2 rounded-lg hover:bg-amber-600">Write to I/O</button></div><div id="log-separate" class="mt-4 p-2 bg-slate-100 rounded h-32 text-xs font-mono overflow-y-auto"></div></div></div></div><div id="common-ad-bus" class="tab-content"><h3 class="font-bold text-xl mb-2 text-center text-indigo-700">Architecture 2: Common Address & Data Bus</h3><p class="text-center text-sm text-slate-500 mb-4"><strong>Analogy:</strong> A shared highway, but cars and trucks have dedicated on-ramps (Control lines). This saves space, but they have to take turns on the main road.</p><div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center"><div class="md:col-span-2"><svg id="svg-common-ad" class="w-full h-64" viewBox="0 0 400 200"><rect id="cpu-common-ad" x="175" y="10" width="50" height="30" class="component fill-slate-200 stroke-slate-400" rx="5"/><text x="200" y="30" text-anchor="middle">CPU</text><rect id="mem-common-ad" x="10" y="160" width="70" height="30" class="component fill-blue-200 stroke-blue-400" rx="5"/><text x="45" y="180" text-anchor="middle">Memory</text><rect id="io-common-ad" x="320" y="160" width="70" height="30" class="component fill-amber-200 stroke-amber-400" rx="5"/><text x="355" y="180" text-anchor="middle">I/O</text><path d="M 45 160 V 90 M 355 160 V 90" class="stroke-slate-300 stroke-width-2 fill-none"/><path id="com-ad-addr" d="M 200 40 V 80 H 45 M 80 80 H 355" class="bus stroke-sky-500 fill-none"/><path id="com-ad-data" d="M 200 40 V 90 H 45 M 90 90 H 355" class="bus stroke-emerald-500 fill-none"/><path id="com-ad-mem-ctrl" d="M 190 40 V 120 H 45 V 160" class="bus stroke-red-500 fill-none"/><path id="com-ad-io-ctrl" d="M 210 40 V 120 H 355 V 160" class="bus stroke-purple-500 fill-none"/></svg></div><div><div class="flex flex-col space-y-2"><button onclick="simulateBus('common-ad', 'mem_read')" class="w-full bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600">Read from Memory</button><button onclick="simulateBus('common-ad', 'io_write')" class="w-full bg-amber-500 text-white p-2 rounded-lg hover:bg-amber-600">Write to I/O</button></div><div id="log-common-ad" class="mt-4 p-2 bg-slate-100 rounded h-32 text-xs font-mono overflow-y-auto"></div></div></div></div><div id="unified-bus" class="tab-content"><h3 class="font-bold text-xl mb-2 text-center text-indigo-700">Architecture 3: Unified Bus</h3><p class="text-center text-sm text-slate-500 mb-4"><strong>Analogy:</strong> A single highway system for everyone. It's simple and cheap, but the address signs must be unique to avoid cars ending up at the truck depot.</p><div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center"><div class="md:col-span-2"><svg id="svg-unified" class="w-full h-64" viewBox="0 0 400 200"><rect id="cpu-unified" x="175" y="10" width="50" height="30" class="component fill-slate-200 stroke-slate-400" rx="5"/><text x="200" y="30" text-anchor="middle">CPU</text><rect id="mem-unified" x="10" y="160" width="70" height="30" class="component fill-blue-200 stroke-blue-400" rx="5"/><text x="45" y="180" text-anchor="middle">Memory</text><rect id="io-unified" x="320" y="160" width="70" height="30" class="component fill-amber-200 stroke-amber-400" rx="5"/><text x="355" y="180" text-anchor="middle">I/O</text><path d="M 45 160 V 110 M 355 160 V 110" class="stroke-slate-300 stroke-width-2 fill-none"/><path id="uni-addr" d="M 200 40 V 80 H 45 M 80 80 H 355" class="bus stroke-sky-500 fill-none"/><path id="uni-data" d="M 200 40 V 95 H 45 M 95 95 H 355" class="bus stroke-emerald-500 fill-none"/><path id="uni-ctrl" d="M 200 40 V 110 H 45 M 110 110 H 355" class="bus stroke-red-500 fill-none"/></svg></div><div><div class="flex flex-col space-y-2"><button onclick="simulateBus('unified', 'mem_read')" class="w-full bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600">Read from Memory (Addr 0x1000)</button><button onclick="simulateBus('unified', 'io_write')" class="w-full bg-amber-500 text-white p-2 rounded-lg hover:bg-amber-600">Write to I/O (Addr 0xF004)</button></div><div id="log-unified" class="mt-4 p-2 bg-slate-100 rounded h-32 text-xs font-mono overflow-y-auto"></div></div></div></div><div class="mt-12"><h3 class="text-2xl font-bold text-center mb-6">Bus Architectures at a Glance</h3><div class="overflow-x-auto"><table class="w-full min-w-max text-left border-collapse"><thead><tr class="bg-slate-100"><th class="p-4 font-semibold border-b border-slate-300">Feature</th><th class="p-4 font-semibold border-b border-slate-300">Separate Busses</th><th class="p-4 font-semibold border-b border-slate-300">Common Address/Data</th><th class="p-4 font-semibold border-b border-slate-300">Unified Bus</th></tr></thead><tbody><tr class="border-b border-slate-200"><td class="p-4 font-medium">Cost & Complexity</td><td class="p-4 text-red-600">High (many pins/wires)</td><td class="p-4 text-orange-600">Medium</td><td class="p-4 text-green-600">Low (fewest pins)</td></tr><tr class="bg-slate-50 border-b border-slate-200"><td class="p-4 font-medium">Performance</td><td class="p-4 text-green-600">High (parallel access possible)</td><td class="p-4 text-orange-600">Good (contention on A/D bus)</td><td class="p-4 text-red-600">Lower (contention on all busses)</td></tr><tr class="border-b border-slate-200"><td class="p-4 font-medium">Enabled I/O Scheme</td><td class="p-4">I/O-Mapped I/O</td><td class="p-4">I/O-Mapped I/O</td><td class="p-4">Memory-Mapped I/O</td></tr><tr class="bg-slate-50"><td class="p-4 font-medium">Example Use Case</td><td class="p-4">Specialized high-performance systems</td><td class="p-4">Classic PC Architectures (e.g. Intel 8086)</td><td class="p-4">Modern embedded systems, SoCs (System on a Chip)</td></tr></tbody></table></div></div></div></section>

        <section id="addressing" class="mb-16"><h2 class="text-3xl font-bold text-center mb-8">Addressing: How the CPU Finds the Right Device</h2><div class="bg-white p-8 rounded-xl shadow-lg"><p class="text-center text-slate-600 mb-8">Now that we know we need an interface, how does the CPU specify *which* interface to talk to? This depends on the bus architecture.</p><div class="bg-slate-50 p-6 rounded-lg"><div class="flex justify-center border-b mb-4"><button class="tab-button p-4 active" data-tab="memory-mapped">Memory-Mapped I/O</button><button class="tab-button p-4" data-tab="io-mapped">I/O-Mapped I/O</button></div><div id="memory-mapped" class="tab-content active p-4"><h4 class="font-bold text-xl mb-2 text-center text-indigo-700">One Big Address Space</h4><p class="text-center mb-4">I/O devices are treated like memory locations. A portion of the memory address space is reserved for them. This is made possible by a <strong>Unified Bus</strong>.</p><div class="w-full bg-slate-200 h-10 rounded-lg flex items-center overflow-hidden"><div class="bg-sky-500 h-full w-3/4 flex items-center justify-center text-white font-semibold">Main Memory Space</div><div class="bg-amber-500 h-full w-1/4 flex items-center justify-center text-white font-semibold">I/O Space</div></div><ul class="mt-4 list-disc list-inside space-y-1 mx-auto max-w-md"><li><strong class="text-green-600">Pro:</strong> Any memory instruction (e.g., `MOV`) can access devices. More flexible.</li><li><strong class="text-red-600">Con:</strong> Reduces the available memory address space.</li></ul></div><div id="io-mapped" class="tab-content p-4"><h4 class="font-bold text-xl mb-2 text-center text-indigo-700">Two Separate Spaces</h4><p class="text-center mb-4">Memory and I/O devices have their own separate address spaces. Special instructions (like `IN`/`OUT`) and dedicated control lines are needed. This works with a bus that has <strong>Common Address/Data but separate Control lines</strong>.</p><div class="flex flex-col sm:flex-row gap-4"><div class="w-full bg-sky-500 h-10 rounded-lg flex items-center justify-center text-white font-semibold">Full Memory Space</div><div class="w-full bg-amber-500 h-10 rounded-lg flex items-center justify-center text-white font-semibold">Separate I/O Space</div></div><ul class="mt-4 list-disc list-inside space-y-1 mx-auto max-w-md"><li><strong class="text-green-600">Pro:</strong> Doesn't reduce memory space. Clear distinction between memory and I/O.</li><li><strong class="text-red-600">Con:</strong> Requires special CPU instructions, less flexible.</li></ul></div></div></div></section>

        <section id="transfer" class="mb-16"><h2 class="text-3xl font-bold text-center mb-8">Modes of Data Transfer</h2><div class="bg-white p-8 rounded-xl shadow-lg"><div class="flex justify-center border-b mb-6"><button class="tab-button p-4 active" data-tab="programmed">Programmed I/O</button><button class="tab-button p-4" data-tab="interrupt">Interrupt-Driven I/O</button><button class="tab-button p-4" data-tab="dma">Direct Memory Access (DMA)</button></div><div id="programmed" class="tab-content active"><h3 class="text-2xl font-semibold text-center mb-2">Programmed I/O (Polling)</h3><p class="text-center text-slate-600 mb-6">Analogy: Constantly checking your mailbox for a letter. The CPU is in a "busy-wait" loop, repeatedly asking the device, "Are you ready yet?"</p><div class="bg-slate-100 p-6 rounded-lg flex flex-col items-center"><div class="flex items-center gap-6 mb-4"><div class="text-center"><div class="text-4xl">CPU üß†</div><div>Processor</div></div><div id="polling-status" class="font-mono text-lg text-red-500 transition-colors duration-300">"Are you ready?"</div><div class="text-center"><div class="text-4xl">üì†</div><div>I/O Device</div></div></div><div class="w-full max-w-md bg-white p-4 rounded-lg shadow"><h4 class="font-semibold text-center">Device Status: <span id="device-status-text" class="font-bold text-red-600">NOT READY</span></h4></div><button id="pio-ready-btn" class="mt-6 bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-indigo-700 transition">Make Device Ready</button><p class="mt-4 text-sm text-red-700 font-semibold" id="pio-cpu-status">CPU is 100% occupied with polling!</p></div></div><div id="interrupt" class="tab-content"><h3 class="text-2xl font-semibold text-center mb-2">Interrupt-Driven I/O</h3><p class="text-center text-slate-600 mb-6">Analogy: Working on a task until the doorbell rings. The CPU does other work and only deals with the I/O device when it sends an "interrupt" signal.</p><div class="bg-slate-100 p-6 rounded-lg flex flex-col items-center"><div class="w-full max-w-lg mb-4"><label for="cpu-task" class="font-semibold">CPU's Main Task:</label><div class="w-full bg-slate-200 rounded-full h-6"><div id="cpu-progress" class="bg-blue-600 h-6 rounded-full progress-bar-inner" style="width: 0%"></div></div><p id="interrupt-cpu-status" class="text-center mt-2 font-semibold text-green-700">CPU is productive!</p></div><button id="interrupt-btn" class="bg-amber-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-amber-600 transition disabled:opacity-50" disabled>Device sends interrupt!</button><div id="isr-section" class="w-full max-w-lg mt-4 hidden"><label for="isr-task" class="font-semibold text-indigo-800">Interrupt Service Routine (Handling I/O):</label><div class="w-full bg-slate-200 rounded-full h-6"><div id="isr-progress" class="bg-indigo-500 h-6 rounded-full progress-bar-inner" style="width: 0%"></div></div></div></div></div><div id="dma" class="tab-content"><h3 class="text-2xl font-semibold text-center mb-2">Direct Memory Access (DMA)</h3><p class="text-center text-slate-600 mb-6">Analogy: Hiring a dedicated moving crew. The CPU tells a specialized DMA Controller to handle a large data transfer directly between I/O and memory, freeing up the CPU completely.</p><div class="bg-slate-100 p-6 rounded-lg flex flex-col items-center"><div class="w-full max-w-2xl relative mb-4 h-48"><div class="absolute top-0 left-1/2 -translate-x-1/2 text-center"><div class="text-4xl">CPU üß†</div><div class="font-semibold">CPU</div></div><div class="absolute bottom-0 left-0 text-center"><div class="text-4xl">üíæ</div><div class="font-semibold">I/O Device</div></div><div class="absolute bottom-0 right-0 text-center"><div class="text-4xl">üóÇÔ∏è</div><div class="font-semibold">Memory</div></div><div id="dmac" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center p-2 bg-white rounded-lg border-2 border-slate-300 transition-all duration-500"><div class="text-2xl">ü§ñ</div><div class="font-semibold text-sm">DMAC</div></div><svg class="absolute inset-0 w-full h-full overflow-visible"><path id="path-cpu-dmac" d="M 160 30 C 160 70, 160 70, 160 85" stroke="#4f46e5" stroke-width="3" fill="none" stroke-linecap="round"/><path id="path-io-mem" d="M 40 160 C 160 160, 160 160, 280 160" stroke="#10b981" stroke-width="3" fill="none" stroke-linecap="round"/><path id="path-dmac-cpu" d="M 160 115 C 160 115, 160 60, 160 40" stroke="#ef4444" stroke-width="2" fill="none" stroke-linecap="round" stroke-dasharray="5 5"/></svg></div><button id="dma-start-btn" class="bg-green-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-green-700 transition">Start DMA Transfer</button><div id="dma-log" class="mt-4 w-full max-w-xl bg-white p-4 rounded-lg shadow-inner h-32 overflow-y-auto font-mono text-sm"></div></div></div></div></section>
        
        <section id="quiz"><h2 class="text-3xl font-bold text-center mb-8">Test Your Knowledge</h2><div class="bg-white p-8 rounded-xl shadow-lg max-w-4xl mx-auto"><div id="quiz-container"></div><button id="submit-quiz" class="mt-6 w-full bg-indigo-600 text-white font-semibold py-3 rounded-lg hover:bg-indigo-700 transition text-lg">Submit Answers</button><div id="quiz-results" class="mt-6 text-center text-2xl font-bold"></div></div></section>
    </main>
    
    <footer class="text-center py-6 bg-slate-100 mt-16"><p class="text-slate-500">An interactive lesson on Computer I/O Organization.</p></footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Bus Simulation Logic ---
        let simulationInProgress = false;
        window.simulateBus = function(model, operation) { if (simulationInProgress) return; simulationInProgress = true; const log = document.getElementById(`log-${model}`); log.innerHTML = ''; const allBuses = document.querySelectorAll(`#svg-${model} .bus`); const allComponents = document.querySelectorAll(`#svg-${model} .component`); allBuses.forEach(b => b.classList.remove('active')); allComponents.forEach(c => c.classList.remove('active')); const logMessage = msg => { log.innerHTML += `<p>> ${msg}</p>`; log.scrollTop = log.scrollHeight; }; const highlight = (id, isActive) => { const el = document.getElementById(id); if (el) isActive ? el.classList.add('active') : el.classList.remove('active'); }; const animateBus = (id, duration) => { const el = document.getElementById(id); if (el) { el.classList.add('active'); setTimeout(() => el.classList.remove('active'), duration); } }; const sequences = { separate: { mem_read: () => { logMessage("CPU uses MEM Addr Bus."); highlight('cpu-separate', true); animateBus('sep-mem-addr', 3000); setTimeout(() => { logMessage("CPU sends MEM_READ."); animateBus('sep-mem-ctrl', 2000); highlight('mem-separate', true); }, 1000); setTimeout(() => { logMessage("Memory sends data."); animateBus('sep-mem-data', 1000); }, 2000); setTimeout(() => { highlight('cpu-separate', false); highlight('mem-separate', false); }, 3000); }, io_write: () => { logMessage("CPU uses I/O Addr Bus."); highlight('cpu-separate', true); animateBus('sep-io-addr', 3000); setTimeout(() => { logMessage("CPU sends data on I/O Data Bus."); animateBus('sep-io-data', 2000); highlight('io-separate', true); }, 1000); setTimeout(() => { logMessage("CPU sends I/O_WRITE."); animateBus('sep-io-ctrl', 1000); }, 2000); setTimeout(() => { highlight('cpu-separate', false); highlight('io-separate', false); }, 3000); } }, 'common-ad': { mem_read: () => { logMessage("CPU uses common Addr Bus."); highlight('cpu-common-ad', true); animateBus('com-ad-addr', 3000); setTimeout(() => { logMessage("CPU asserts MEM_READ."); animateBus('com-ad-mem-ctrl', 2000); highlight('mem-common-ad', true); }, 1000); setTimeout(() => { logMessage("Memory responds on Data Bus."); animateBus('com-ad-data', 1000); }, 2000); setTimeout(() => { highlight('cpu-common-ad', false); highlight('mem-common-ad', false); }, 3000); }, io_write: () => { logMessage("CPU uses common Addr Bus."); highlight('cpu-common-ad', true); animateBus('com-ad-addr', 3000); setTimeout(() => { logMessage("CPU puts data on Data Bus."); animateBus('com-ad-data', 2000); highlight('io-common-ad', true); }, 1000); setTimeout(() => { logMessage("CPU asserts I/O_WRITE."); animateBus('com-ad-io-ctrl', 1000); }, 2000); setTimeout(() => { highlight('cpu-common-ad', false); highlight('io-common-ad', false); }, 3000); } }, unified: { mem_read: () => { logMessage("CPU places address on Bus."); highlight('cpu-unified', true); animateBus('uni-addr', 3000); setTimeout(() => { logMessage("CPU asserts READ."); animateBus('uni-ctrl', 2000); highlight('mem-unified', true); }, 1000); setTimeout(() => { logMessage("Memory places data on Bus."); animateBus('uni-data', 1000); }, 2000); setTimeout(() => { highlight('cpu-unified', false); highlight('mem-unified', false); }, 3000); }, io_write: () => { logMessage("CPU places address on Bus."); highlight('cpu-unified', true); animateBus('uni-addr', 3000); setTimeout(() => { logMessage("CPU places data on Bus."); animateBus('uni-data', 2000); highlight('io-unified', true); }, 1000); setTimeout(() => { logMessage("CPU asserts WRITE."); animateBus('uni-ctrl', 1000); }, 2000); setTimeout(() => { highlight('cpu-unified', false); highlight('io-unified', false); }, 3000); } } }; if (sequences[model] && sequences[model][operation]) { sequences[model][operation](); } setTimeout(() => { simulationInProgress = false; }, 3500); }

        // --- Interface/Driver Animations ---
        document.getElementById('btn-chaos-output').addEventListener('click', e => {
            const btn = e.target; btn.disabled = true;
            const elements = [ document.getElementById('chaos-cpu-packet-1'), document.getElementById('chaos-cpu-packet-2'), document.getElementById('err-printer-speed'), document.getElementById('err-format-shatter'), ];
            elements.forEach(el => el.classList.remove('animate-send')); void btn.offsetWidth;
            setTimeout(() => elements[0].classList.add('animate-send'), 100); setTimeout(() => elements[1].classList.add('animate-send'), 300); setTimeout(() => elements[2].classList.add('animate-send'), 1200); setTimeout(() => elements[3].classList.add('animate-send'), 900);
            setTimeout(() => btn.disabled = false, 2500);
        });
        document.getElementById('btn-chaos-input').addEventListener('click', e => {
            const btn = e.target; btn.disabled = true;
            const signal = document.getElementById('chaos-key-signal');
            const error = document.getElementById('err-input-format');
            [signal, error].forEach(el => el.classList.remove('animate-send')); void btn.offsetWidth;
            signal.classList.add('animate-send');
            setTimeout(() => error.classList.add('animate-send'), 800);
            setTimeout(() => btn.disabled = false, 2500);
        });
        document.getElementById('btn-solution').addEventListener('click', e => {
            const btn = e.target; btn.disabled = true;
            const elements = { cpu: document.getElementById('sol-cpu-packet'), ssd: document.getElementById('sol-ssd-packet'), printer: document.getElementById('sol-printer-packet'), keyboard: document.getElementById('sol-keyboard-packet'), buffer: document.getElementById('sol-buffer-fill') };
            Object.values(elements).forEach(el => { el.classList.remove('animate-send'); });
            elements.buffer.style.transition = 'none'; elements.buffer.style.width = '0';
            void btn.offsetWidth;
            elements.cpu.classList.add('animate-send');
            setTimeout(() => {
                elements.buffer.style.transition = 'width 0.5s ease-in-out';
                elements.buffer.style.width = '50px';
                elements.ssd.classList.add('animate-send');
                setTimeout(() => {
                    elements.printer.classList.add('animate-send');
                    elements.keyboard.classList.add('animate-send');
                }, 500);
            }, 800);
            setTimeout(() => btn.disabled = false, 3000);
        });
        document.getElementById('btn-driver').addEventListener('click', (e) => { e.target.disabled = true; const log = document.getElementById('driver-log'); log.innerHTML = ''; const logMessage = (msg) => { log.innerHTML += `<p>> ${msg}</p>`; log.scrollTop = log.scrollHeight; }; const elements = { a1: document.getElementById('driver-arrow-1'), a2: document.getElementById('driver-arrow-2'), l1: document.getElementById('driver-line-1'), l2: document.getElementById('driver-line-2'), l3: document.getElementById('driver-line-3'), rs: document.getElementById('reg-status'), rd: document.getElementById('reg-data'), rc: document.getElementById('reg-ctrl'), vs: document.getElementById('val-status'), vd: document.getElementById('val-data'), vc: document.getElementById('val-ctrl') }; Object.values(elements).forEach(el => el.classList.remove('active')); elements.vs.textContent = 'BUSY'; elements.vs.style.color = 'red'; elements.vd.textContent = ''; elements.vc.textContent = '';[elements.a1, elements.a2, elements.l1, elements.l2, elements.l3, elements.vs, elements.vd, elements.vc].forEach(el => el.style.opacity = 0); let delay = 500; setTimeout(() => { logMessage("App calls OS with print()."); elements.a1.style.opacity = 1; }, delay); delay += 1500; setTimeout(() => { logMessage("OS invokes the printer driver."); elements.l1.classList.add('active'); elements.rs.classList.add('active'); }, delay); delay += 1500; setTimeout(() => { logMessage("Driver checks Status Register..."); elements.vs.style.opacity = 1; }, delay); delay += 2000; setTimeout(() => { logMessage("Device is now READY."); elements.vs.textContent = 'READY'; elements.vs.style.color = 'green'; elements.rs.classList.remove('active'); elements.l1.classList.remove('active'); }, delay); delay += 1000; setTimeout(() => { logMessage("Driver writes 'H' to Data Register."); elements.l2.classList.add('active'); elements.rd.classList.add('active'); }, delay); delay += 1500; setTimeout(() => { elements.vd.textContent = "'H'"; elements.vd.style.opacity = 1; }, delay); delay += 1000; setTimeout(() => { elements.rd.classList.remove('active'); elements.l2.classList.remove('active'); }, delay); delay += 500; setTimeout(() => { logMessage("Driver writes START to Control Register."); elements.l3.classList.add('active'); elements.rc.classList.add('active'); }, delay); delay += 1500; setTimeout(() => { elements.vc.textContent = "GO!"; elements.vc.style.opacity = 1; elements.a2.style.opacity = 1; }, delay); delay += 1500; setTimeout(() => { logMessage("Interface takes over. Command complete!"); e.target.disabled = false; }, delay); });
        
        // --- Standard Setup Code (Menus, Tabs, DragDrop, etc.) ---
        const menuBtn = document.getElementById('menu-btn'); const mobileMenu = document.getElementById('mobile-menu'); menuBtn.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });
        const tabContainers = document.querySelectorAll('.bg-white.p-8, .bg-slate-50.p-6'); tabContainers.forEach(container => { const tabButtons = container.querySelectorAll('.tab-button'); const tabContents = container.querySelectorAll('.tab-content'); tabButtons.forEach(button => { button.addEventListener('click', () => { tabButtons.forEach(btn => btn.classList.remove('active')); button.classList.add('active'); const targetTab = button.getAttribute('data-tab'); tabContents.forEach(content => { content.classList.remove('active'); if (content.id === targetTab) { content.classList.add('active'); } }); }); }); });
        const draggables = document.querySelectorAll('.draggable'); const dropzones = document.querySelectorAll('.dropzone'); const feedbackCorrect = document.querySelector('#feedback-container .text-green-500'); const feedbackIncorrect = document.querySelector('#feedback-container .text-red-500'); draggables.forEach(draggable => { draggable.addEventListener('dragstart', () => draggable.classList.add('dragging')); draggable.addEventListener('dragend', () => draggable.classList.remove('dragging')); }); dropzones.forEach(zone => { zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('drag-over'); }); zone.addEventListener('dragleave', () => zone.classList.remove('drag-over')); zone.addEventListener('drop', e => { e.preventDefault(); zone.classList.remove('drag-over'); const dragged = document.querySelector('.dragging'); if (dragged && zone.dataset.type === dragged.dataset.type) { zone.querySelector('div').appendChild(dragged); dragged.setAttribute('draggable', 'false'); showFeedback(true); } else { showFeedback(false); } }); }); function showFeedback(isCorrect) { const feedback = isCorrect ? feedbackCorrect : feedbackIncorrect; feedback.classList.add('show'); setTimeout(() => { feedback.classList.remove('show'); }, 1500); }
        const pioReadyBtn = document.getElementById('pio-ready-btn'); const deviceStatusText = document.getElementById('device-status-text'); const pollingStatus = document.getElementById('polling-status'); const pioCpuStatus = document.getElementById('pio-cpu-status'); let pollingInterval; function startPolling() { let i = 0; pollingInterval = setInterval(() => { const messages = ['"Are you ready?"', '"Ready yet?"', '"How about now?"']; pollingStatus.textContent = messages[i % messages.length]; pollingStatus.classList.toggle('text-red-500'); pollingStatus.classList.toggle('text-orange-500'); i++; }, 700); } startPolling(); pioReadyBtn.addEventListener('click', () => { clearInterval(pollingInterval); deviceStatusText.textContent = 'READY & DATA TRANSFERRED'; deviceStatusText.className = 'font-bold text-green-600'; pollingStatus.textContent = '"Got the data!"'; pollingStatus.className = 'font-mono text-lg text-green-500'; pioCpuStatus.textContent = 'CPU is now free!'; pioCpuStatus.className = 'mt-4 text-sm text-green-700 font-semibold'; pioReadyBtn.disabled = true; pioReadyBtn.classList.add('opacity-50'); });
        const cpuProgress = document.getElementById('cpu-progress'); const interruptBtn = document.getElementById('interrupt-btn'); const interruptCpuStatus = document.getElementById('interrupt-cpu-status'); const isrSection = document.getElementById('isr-section'); const isrProgress = document.getElementById('isr-progress'); let cpuProgressInterval; let cpuWidth = 0; function runCpuTask() { interruptCpuStatus.textContent = "CPU is productive!"; interruptCpuStatus.className = "text-center mt-2 font-semibold text-green-700"; cpuProgressInterval = setInterval(() => { if (cpuWidth < 100) { cpuWidth += 1; cpuProgress.style.width = cpuWidth + '%'; if (cpuWidth > 20 && cpuWidth < 80) { interruptBtn.disabled = false; } else { interruptBtn.disabled = true; } } else { clearInterval(cpuProgressInterval); interruptCpuStatus.textContent = "CPU Task Complete!"; } }, 100); } runCpuTask(); interruptBtn.addEventListener('click', () => { clearInterval(cpuProgressInterval); interruptBtn.disabled = true; interruptCpuStatus.textContent = "INTERRUPT! Pausing main task..."; interruptCpuStatus.className = "text-center mt-2 font-semibold text-red-700"; isrSection.style.display = 'block'; let isrWidth = 0; const isrInterval = setInterval(() => { if(isrWidth < 100) { isrWidth += 5; isrProgress.style.width = isrWidth + '%'; } else { clearInterval(isrInterval); isrSection.style.display = 'none'; isrProgress.style.width = '0%'; runCpuTask(); } }, 80); });
        const dmaStartBtn = document.getElementById('dma-start-btn'); const dmaLog = document.getElementById('dma-log'); const dmacElement = document.getElementById('dmac'); dmaStartBtn.addEventListener('click', () => { dmaStartBtn.disabled = true; dmaLog.innerHTML = ''; const paths = { cpuToDmac: document.getElementById('path-cpu-dmac'), ioToMem: document.getElementById('path-io-mem'), dmacToCpu: document.getElementById('path-dmac-cpu') }; const animatePath = (path) => { path.classList.remove('path-animation'); void path.offsetWidth; path.classList.add('path-animation'); }; const logMessage = (msg) => { dmaLog.innerHTML += `<p>> ${msg}</p>`; dmaLog.scrollTop = dmaLog.scrollHeight; }; logMessage("DMA sequence initiated..."); setTimeout(() => { logMessage("CPU programs DMAC."); animatePath(paths.cpuToDmac); }, 500); setTimeout(() => { logMessage("DMAC gains control of bus."); dmacElement.classList.add('highlight-border'); }, 2500); setTimeout(() => { logMessage("Data transfer: I/O -> Memory."); logMessage("CPU is free to do other tasks."); animatePath(paths.ioToMem); }, 3500); setTimeout(() => { logMessage("Transfer complete!"); dmacElement.classList.remove('highlight-border'); }, 5500); setTimeout(() => { logMessage("DMAC interrupts CPU."); animatePath(paths.dmacToCpu); dmaStartBtn.disabled = false; }, 6000); });
        
        const quizContainer = document.getElementById('quiz-container'); const submitQuizBtn = document.getElementById('submit-quiz'); const quizResults = document.getElementById('quiz-results'); const quizQuestions = [{ question: "An I/O Controller Hub is needed to handle the variety of peripheral...", options: ["Colors and sizes", "Speeds, data formats, and control methods", "Power requirements"], answer: "Speeds, data formats, and control methods" }, { question: "Which bus architecture is the basis for Memory-Mapped I/O?", options: ["Separate Busses", "Common Address/Data Bus", "Unified Bus"], answer: "Unified Bus" }, { question: "For transferring a large video file from a hard drive to RAM, which method is most efficient for the CPU?", options: ["Programmed I/O", "Direct Memory Access (DMA)", "Interrupt-Driven I/O"], answer: "Direct Memory Access (DMA)" }, { question: "The software component that translates `print()` commands into register operations is the...", options: ["Compiler", "Operating System", "Device Driver"], answer: "Device Driver" }]; function buildQuiz() { let quizHTML = ''; quizQuestions.forEach((q, index) => { quizHTML += `<div class="mb-6 p-4 border rounded-lg"><p class="font-semibold text-lg mb-3">${index + 1}. ${q.question}</p><div class="space-y-2">`; q.options.forEach(option => { quizHTML += `<label class="flex items-center p-3 bg-slate-50 rounded-md hover:bg-slate-100 cursor-pointer"><input type="radio" name="question${index}" value="${option}" class="mr-3"><span>${option}</span></label>`; }); quizHTML += `</div></div>`; }); quizContainer.innerHTML = quizHTML; } submitQuizBtn.addEventListener('click', () => { let score = 0; quizQuestions.forEach((q, index) => { const selected = document.querySelector(`input[name="question${index}"]:checked`); const labels = document.querySelectorAll(`input[name="question${index}"]`); labels.forEach(label => { const parent = label.parentElement; parent.classList.remove('bg-red-200', 'bg-green-200'); if (label.value === q.answer) { parent.classList.add('bg-green-200'); } }); if (selected) { if (selected.value === q.answer) { score++; } else { selected.parentElement.classList.add('bg-red-200'); } } }); quizResults.textContent = `You scored ${score} out of ${quizQuestions.length}!`; }); buildQuiz();
    });
    </script>
</body>
</html>

